function onLoginClick(e){var t=$.trim($("#username").val()),r=$("#role").val(),o=$.trim($("#room").val());return""==t?(alert("이름을 입력하세욧!"),void $("#username").focus()):""==o?(alert("방이름을 입력하세욧!"),void $("#room").focus()):"__login__"==o?(alert("사용할 수 없는 방입니다."),void $("#room").select()):void socket.emit("login",{username:t,role:r,room:o})}function onLogoutClick(e){e&&e.preventDefault();var t=localStorage.getItem("uid"),r=localStorage.getItem("username");socket.emit("logout",{uid:t,username:r,room:room})}function onIssueIdKeydown(e){13==e.keyCode&&onSearchIssueClick(e)}function onJoinRoom(e){$("#room").val(e),onLoginClick()}function onSearchIssueClick(e){e.preventDefault();var t=$("#issue-id").val();if(""==t)return void alert("Issue Id를 입력해주세요");var r={issueId:t,room:room};socket.emit("search-issue",r)}function onUpdateStoryClick(e){e.preventDefault();var t=$("#issue-id").val();if(""==t)return void alert("Issue Id를 입력해주세요");var r=$("#story-point").val();if(""==r)return void alert("Story Point를 입력해주세요");var o={issueId:t,storyPoint:r,room:room};socket.emit("update-story",o)}function onSelectCardClick(e){e.preventDefault(),$("#card-selection > a").removeClass("card-choice-selected"),$(this).addClass("card-choice-selected");var t=$(this).text(),r=localStorage.getItem("username"),o=localStorage.getItem("uid"),a={uid:o,username:r,value:t,room:room};socket.emit("select-card",a)}function onShowUsernameClick(e){var t=$("#show-username").prop("checked")?"Y":"N",r={value:t,room:room};socket.emit("show-username",r)}function onCancelCardClick(e){e.preventDefault();var t=$(this).text(),r=localStorage.getItem("username"),o=localStorage.getItem("uid"),a={uid:o,username:r,value:t,room:room};socket.emit("cancel-card",a)}function onOpenCardClick(e){e.preventDefault();({room:room});socket.emit("open-card",room)}function onCloseCardClick(e){e.preventDefault();({room:room});socket.emit("close-card",room)}function onResetCardClick(e){e.preventDefault();var t={room:room};socket.emit("reset-card",t)}function getUserImageByRole(e){var t="";switch(e){case"developer":t="/images/person/developer.png";break;case"scrummaster":t="/images/person/scrummaster.png";break;default:t="/images/person/viewer.png"}return t}function getRoleName(e){var t="";switch(e){case"developer":t="개발자";break;case"scrummaster":t="마스터";break;default:t="참관자"}return t}function onGamePlanningPokerClick(e){e.preventDefault();var t={game:"planning-poker",room:room};socket.emit("game.start",t)}function onGameMixItUpClick(e){e.preventDefault();var t={game:"mix-it-up",room:room};socket.emit("game.start",t)}function onCheckMixItUpClick(e){var t=$(this).parent(".list-group-item"),r=t.attr("uid"),o=t.find(".text-value").text(),a=t.find(".avatar").attr("src");if($(this).is(":checked")){var i="";i+='<div class="poker-card-display" uid="'+r+'">',i+='<a class="poker-card poker-card-value"><img src="'+a+'" style="width:60px"/></a>',i+='<a class="poker-card poker-card-cover" style="display:none"></a>',i+='<span class="poker-card-player" title="'+o+'">'+o+"</span>",i+="</div>",$('<div id="tmpcard_'+r+'" class="poker-card-display" style="border:1px dotted gray; width:70px; height:120px;"></div>').appendTo("#card-selected-list");var n=$("#card-selected-list").find("#tmpcard_"+r),c=$("#participants").find('li[uid="'+r+'"]'),s={to:n,className:"ui-effects-transfer"};c.effect("transfer",s,500,function(){n.replaceWith(i),$("#card-selected-list").find('div[uid="'+r+'"]').on("click",function(){var e={};$(this).find(".poker-card-cover").hide("shake",e,1e3,function(){}),$(this).find(".poker-card-player").show()})})}else{var c=$("#card-selected-list").find('div[uid="'+r+'"]'),n=$("#participants").find('li[uid="'+r+'"]'),s={to:n,className:"ui-effects-transfer"};setTimeout(function(){c.hide()},100),c.effect("transfer",s,500,function(){c.remove()})}}function onStartMixItUpClick(e){e.preventDefault(),$("#card-selected-list").mixItUp({selectors:{target:".poker-card-display"},load:{sort:"random"},callbacks:{onMixLoad:function(){console.error("MixItUp ready!")},onMixStart:function(){console.error("Animation starting!")},onMixEnd:function(e){console.error("Operation ended : "+e.totalShow)},onMixFail:function(e){console.error("No elements found matching "+e.activeFilter)},onMixBusy:function(e){console.error("MixItUp busy")}}}),$("#mix-it-up-layer").find(".sort").removeClass("disabled"),$("#mix-it-up-layer").find("#open").removeClass("disabled"),$("#mix-it-up-layer").find("#close").removeClass("disabled"),$("#mix-it-up-layer").find("#add-layer").removeClass("disabled")}function onCheckAllMixItUpClick(e){$("#participants").find("li").each(function(){return!!$(this).find(".chk").is(":checked")||void $(this).find(".chk").trigger("click")})}function onOpenMixItUpClick(e){e.preventDefault(),$("#card-selected-list").find(".poker-card-cover").hide(),$("#card-selected-list").find(".poker-card-player").show()}function onCloseMixItUpClick(e){e.preventDefault(),$("#card-selected-list").find(".poker-card-cover").show(),$("#card-selected-list").find(".poker-card-player").hide()}function onAddLayerMixItUpClick(e){e.preventDefault();var t='<div style="display:inline-block; border-top:5px solid #d9534f; cursor:move;">';t+='<input type="text" class="form-control" style="width:65px; height:30px; border:1px solid #d9534f; font-size:12px;"/>',t+="</div>",$(t).appendTo("#card-selected-list").draggable()}function onGameMemoryClick(e){e.preventDefault();var t={game:"memory",room:room};socket.emit("game.start",t)}function onStartMemoryClick(e){var t=parseInt($("#memory-layer").find("#row").val()),r=$("#memory-layer").find("#target").val(),o={row:t,target:r,room:room};socket.emit("memory.start",o)}function onOpenMemoryClick(e){e.preventDefault()}function onCloseMemoryClick(e){e.preventDefault()}function onRowMemoryChange(e){e.preventDefault();var t={row:$("#memory-layer").find("#row").val(),room:room};socket.emit("memory.changeRow",t)}function onTargeteMemoryChange(e){e.preventDefault();var t={target:$("#memory-layer").find("#target").val(),room:room};socket.emit("memory.changeTarget",t)}function changeGame(e){var t=(localStorage.getItem("username"),localStorage.getItem("role"));localStorage.getItem("uid");switch($(".planning-poker").hide(),$(".mix-it-up").hide(),$(".memory").hide(),$("#card-selected-list").css("width","100%"),$("#participants").find("input[type=checkbox]").remove(),e.currentGame){case"planning-poker":$(".planning-poker").show(),"scrummaster"==t?($("#card-action-button").find("#user-story-layer").show(),$("#card-action-button").find("#close-card").hide(),$("#card-action-button").find("#show-username-layer").show(),$("#card-action-button").find("#show-username-layer").show(),"Y"==e.showUsername?$("#card-action-button").find("#show-username").prop("checked",!0):$("#card-action-button").find("#show-username").prop("checked",!1)):($("#user-story-layer").hide(),$("#card-action-button").find("#reset-card").hide(),$("#card-action-button").find("#open-card").hide(),$("#card-action-button").find("#close-card").hide(),$("#card-action-button").find("#show-username-layer").hide());break;case"mix-it-up":$(".mix-it-up").show(),"scrummaster"!=t&&$("#mix-it-up-layer").hide(),$("#participants").find("li").each(function(){return $(this).find(".chk").length>0?($(this).find(".chk").attr("checked",!1),!0):void $('<input type="checkbox" class="chk" />').prependTo($(this)).on("click",onCheckMixItUpClick)}),$("#card-action-button").find("#reset-card").trigger("click");break;case"memory":$(".memory").show(),"scrummaster"!=t&&($("#memory-layer").find("#row").attr("disabled","disabled"),$("#memory-layer").find("#target").attr("disabled","disabled"))}}function guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}